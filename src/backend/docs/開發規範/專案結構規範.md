# 專案結構規範

## 📋 文件目的

本文件定義後端專案的架構設計、包結構組織和開發約束，確保專案結構清晰一致。

## 🎯 專案定位

### 專案類型
- **純Web API專案** - 僅提供REST API服務，不含視圖或靜態資源
- **後端服務** - 專注於業務邏輯處理和資料操作
- **單體應用** - 採用單一Spring Boot專案結構

### 技術約束
- **禁用REST規範** - 不採用RESTful設計風格
- **HTTP方法限制** - 僅使用GET和POST方法
- **設計文件驅動** - 所有API設計完全遵循提供的設計文件

## 🏗 分層架構設計

### 架構選擇
**採用：功能導向分層架構**

**架構原則：**
- 純Web API專案，不含視圖或靜態資源
- **禁用REST規範，僅使用GET和POST方法**
- 按業務功能劃分功能模組
- 每個功能模組內部採用傳統三層架構
- API設計完全遵循設計文件，不採用REST風格
- 共用組件獨立管理

### 專案結構
```
main-app/
├── pom.xml
└── src/main/java/
    ├── moduleA/              # 功能模組A
    │   ├── controller/       # API控制器層
    │   ├── service/          # 業務邏輯層  
    │   ├── repository/       # 資料存取層
    │   ├── entity/           # 實體模型
    │   └── dto/              # 資料傳輸物件
    │       ├── request/      # 請求物件
    │       └── response/     # 回應物件
    ├── moduleB/              # 功能模組B  
    ├── shared/               # 共用組件
    │   ├── config/           # 配置類
    │   ├── exception/        # 異常處理
    │   ├── dto/              # 通用DTO
    │   └── util/             # 工具類
    └── Application.java      # 啟動類
```

## 📦 包結構命名規範

### 基礎命名原則
- 包名使用小寫字母
- 避免使用公司層級包名
- 功能模組名根據設計文件確定
- 避免縮寫，使用完整英文單詞
- 層級包名固定：`controller`, `service`, `repository`, `entity`, `dto`

### 功能模組劃分
- **模組命名** - 根據設計文件中的業務功能確定
- **模組獨立** - 每個模組包含完整的三層架構
- **職責清晰** - 單一功能模組處理相關的業務邏輯

## ⚙️ 配置檔案組織

### Spring Boot配置檔案結構
```
src/main/resources/
├── application.yml              # 預設配置
├── application-dev.yml          # 開發環境
├── application-prod.yml         # 生產環境
├── application-test.yml         # 測試環境
└── db/migration/                # 資料庫遷移腳本
```

**配置特點：**
- 無靜態資源目錄（static/）
- 無視圖模板目錄（templates/）
- 專注於API服務配置

## 🔌 HTTP方法使用規範

### ⚠️ 重要：禁用REST規範與REST風格

**控制器層HTTP方法限制：**
- **僅支援 GET 和 POST 方法**
- **禁止使用 PUT、DELETE、PATCH 等REST方法**
- **禁止使用REST風格的URL路徑設計**
- **禁止使用REST資源導向的設計思維**
- 具體使用方式完全遵循API設計文件規定

### API設計原則
- **設計文件至上** - API路徑和方法完全按照設計文件定義
- **功能導向** - API路徑基於功能操作，非資源操作
- **統一POST模式** - 除查詢外的所有操作都使用POST方法

## 🔗 跨模組依賴原則

### 模組間協作規範
- 模組間依賴僅通過 Service 層介面進行
- 禁止直接存取其他模組的 Repository 層
- 共用邏輯統一放置在 shared 包中
- 具體依賴關係由設計文件定義

### 依賴管理
- **介面導向** - 跨模組調用通過Service介面
- **層級限制** - 嚴格遵守分層架構約束
- **共用抽象** - 公共邏輯放入shared包

## 📊 架構約束與檢查

### 開發約束
- **模組邊界** - 功能模組間保持清晰邊界
- **層級職責** - 各層級職責單一明確
- **命名一致** - 遵循統一的命名規範
- **配置分離** - 環境配置清晰分離

### 品質檢查
- 包結構符合規範要求
- 模組間依賴關係合理
- 層級職責劃分清晰
- 配置檔案組織規範

## 🎯 實施指導

### 新增功能模組步驟
1. **確認模組名稱** - 根據設計文件確定功能模組名
2. **建立包結構** - 按照規範建立完整的三層架構
3. **定義模組邊界** - 明確模組的職責範圍
4. **建立依賴關係** - 確定與其他模組的協作方式

### 開發注意事項
- 嚴格按照包結構規範組織程式碼
- 遵循HTTP方法限制，不使用REST風格
- 跨模組調用必須通過Service層介面
- 所有API實現都要對應設計文件

---

**版本：** v1.0.0  
**建立日期：** 2025-09-07  
**狀態：** ✅ 專案結構規範制定完成  
**適用範圍：** 所有後端開發工作  
**維護責任：** 後端開發團隊