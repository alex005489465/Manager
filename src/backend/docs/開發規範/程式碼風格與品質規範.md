# ç¨‹å¼ç¢¼é¢¨æ ¼èˆ‡å“è³ªè¦ç¯„

## ğŸ“‹ æ–‡ä»¶ç›®çš„

æœ¬æ–‡ä»¶å®šç¾©å¾Œç«¯å°ˆæ¡ˆçš„ç¨‹å¼ç¢¼é¢¨æ ¼æ¨™æº–ã€å“è³ªè¦æ±‚å’Œé–‹ç™¼å·¥å…·ä½¿ç”¨è¦ç¯„ï¼Œç¢ºä¿ç¨‹å¼ç¢¼å“è³ªä¸€è‡´æ€§ã€‚

## â˜• Javaç·¨ç¢¼æ¨™æº–

### æ¡ç”¨æ¨™æº–ï¼šGoogle Java Style Guide

**é¸æ“‡ç†ç”±ï¼š**
- æ¥­ç•Œå»£æ³›æ¡ç”¨ï¼Œè¦ç¯„å®Œæ•´ä¸”æ˜ç¢º
- å·¥å…·æ”¯æ´å®Œå–„ï¼ˆCheckstyleã€Spotlessã€IDEæ’ä»¶ï¼‰
- èˆ‡@Specæ¨™è¨»æ©Ÿåˆ¶å®Œå…¨ç›¸å®¹
- æ¸›å°‘ç¨‹å¼ç¢¼é¢¨æ ¼è¨è«–ï¼Œæé«˜é–‹ç™¼æ•ˆç‡
- ç¤¾ç¾¤è³‡æºè±å¯Œï¼Œå­¸ç¿’æˆæœ¬ä½

### æ ¸å¿ƒè¦ç¯„è¦é»

**å‘½åè¦ç¯„ï¼š**
- é¡åˆ¥åä½¿ç”¨ PascalCaseï¼š`RecipeService`
- æ–¹æ³•åä½¿ç”¨ camelCaseï¼š`createRecipe()`
- å¸¸æ•¸ä½¿ç”¨ UPPER_SNAKE_CASEï¼š`MAX_RECIPE_COUNT`
- åŒ…åä½¿ç”¨å°å¯«ï¼š`recipe.service`

**æ ¼å¼è¦ç¯„ï¼š**
- ç¸®æ’ä½¿ç”¨2å€‹ç©ºæ ¼
- è¡Œé•·åº¦é™åˆ¶100å­—å…ƒ
- importèªå¥æŒ‰çµ„ç¹”æ’åº
- å¤§æ‹¬è™Ÿä½¿ç”¨Kernighan and Ritchieé¢¨æ ¼

## ğŸ”§ Lombokä½¿ç”¨è¦ç¯„

### å»ºè­°ä½¿ç”¨çš„è¨»è§£

**âœ… æ¨è–¦ä½¿ç”¨ï¼š**
- `@Data` - Entityé¡çš„getter/setterï¼Œæ¸›å°‘æ¨£æ¿ç¨‹å¼ç¢¼
- `@Builder` - å»ºæ§‹è€…æ¨¡å¼ï¼Œç‰¹åˆ¥é©åˆDTOç‰©ä»¶
- `@Slf4j` - æ—¥èªŒè¨˜éŒ„ï¼Œèˆ‡Spring Bootå®Œç¾æ•´åˆ
- `@RequiredArgsConstructor` - Serviceå±¤ä¾è³´æ³¨å…¥ï¼Œæ›¿ä»£@Autowired

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```java
@Entity
@Table(name = "recipes") // @Spec: database-design.md:67
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class Recipe {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // @Spec: model-validation.md:23
    
    @Column(nullable = false)
    @NotBlank // @Spec: model-validation.md:24
    private String name;
}

@Service
@RequiredArgsConstructor
@Slf4j
public class RecipeService {
    private final RecipeRepository recipeRepository;
    
    // è‡ªå‹•æ³¨å…¥ï¼Œç„¡éœ€@Autowired
}
```

### è¬¹æ…ä½¿ç”¨çš„è¨»è§£

**âš ï¸ è¬¹æ…ä½¿ç”¨ï¼š**
- `@AllArgsConstructor` - å¯èƒ½èˆ‡Bean Validationè¨»è§£ç”¢ç”Ÿè¡çª
- `@NoArgsConstructor` - JPAå¯¦é«”éœ€è¦ï¼Œä½†è¦ç¢ºä¿ä¸å½±éŸ¿é©—è­‰é‚è¼¯

### é¿å…ä½¿ç”¨çš„è¨»è§£

**âŒ é¿å…ä½¿ç”¨ï¼š**
- `@SneakyThrows` - éš±è—é‡è¦çš„ç•°å¸¸è™•ç†é‚è¼¯ï¼Œé•åæ˜ç¢ºæ€§åŸå‰‡
- `@Cleanup` - èˆ‡Springæ¡†æ¶çš„è³‡æºç®¡ç†æ©Ÿåˆ¶å¯èƒ½ç”¢ç”Ÿè¡çª

## ğŸš¨ ç•°å¸¸è™•ç†ç­–ç•¥

### çµ±ä¸€ç•°å¸¸è™•ç†æ¶æ§‹

**Global Exception Handlerï¼š**
```java
/**
 * å…¨åŸŸç•°å¸¸è™•ç†å™¨
 * @Spec: api-design.md:error-handling - éŒ¯èª¤å›æ‡‰æ ¼å¼æ¨™æº–
 */
@ControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    /**
     * æ¥­å‹™ç•°å¸¸è™•ç†
     * @Spec: api-design.md:business-error - æ¥­å‹™éŒ¯èª¤å›æ‡‰æ ¼å¼
     */
    @ExceptionHandler(BusinessException.class)
    public ResponseEntity<ApiResponse> handleBusinessException(BusinessException e) {
        log.warn("æ¥­å‹™ç•°å¸¸: code={}, message={}", e.getCode(), e.getMessage());
        return ResponseEntity.ok(ApiResponse.error(e.getCode(), e.getMessage()));
    }
    
    /**
     * åƒæ•¸é©—è­‰ç•°å¸¸è™•ç†
     * @Spec: api-design.md:validation-error - é©—è­‰éŒ¯èª¤å›æ‡‰æ ¼å¼
     */
    @ExceptionHandler(MethodArgumentNotValidException.class) 
    public ResponseEntity<ApiResponse> handleValidationException(MethodArgumentNotValidException e) {
        String errorMessage = e.getBindingResult()
            .getFieldErrors()
            .stream()
            .map(FieldError::getDefaultMessage)
            .collect(Collectors.joining(", "));
            
        log.warn("åƒæ•¸é©—è­‰å¤±æ•—: {}", errorMessage);
        return ResponseEntity.ok(ApiResponse.error("VALIDATION_ERROR", errorMessage));
    }
    
    /**
     * ç³»çµ±ç•°å¸¸è™•ç†
     * @Spec: api-design.md:system-error - ç³»çµ±éŒ¯èª¤å›æ‡‰æ ¼å¼
     */
    @ExceptionHandler(Exception.class)
    public ResponseEntity<ApiResponse> handleSystemException(Exception e) {
        log.error("ç³»çµ±ç•°å¸¸", e);
        return ResponseEntity.ok(ApiResponse.error("SYSTEM_ERROR", "ç³»çµ±å…§éƒ¨éŒ¯èª¤"));
    }
}
```

### ç•°å¸¸è™•ç†åŸå‰‡

**é‡è¦è¦ç¯„ï¼š**
- **HTTPç‹€æ…‹ç¢¼çµ±ä¸€ç‚º200** - å®Œå…¨éµå¾ªAPIè¨­è¨ˆæ–‡ä»¶è¦ç¯„
- **éŒ¯èª¤è³‡è¨Šåœ¨ApiResponseçš„erroræ¬„ä½ä¸­** - ä¿æŒå›æ‡‰æ ¼å¼ä¸€è‡´
- **ç•°å¸¸è¨Šæ¯ä½¿ç”¨è¨­è¨ˆæ–‡ä»¶ä¸­çš„ç²¾ç¢ºç”¨è©** - ç¢ºä¿èˆ‡å‰ç«¯ç´„å®šä¸€è‡´
- **æ¥­å‹™ç•°å¸¸éœ€æ¨™è¨»å°æ‡‰çš„è¨­è¨ˆæ–‡ä»¶ä¾†æº** - ç¶­æŒå¯è¿½æº¯æ€§

**è‡ªå®šç¾©æ¥­å‹™ç•°å¸¸ï¼š**
```java
/**
 * æ¥­å‹™ç•°å¸¸åŸºé¡
 * @Spec: api-design.md:error-codes - éŒ¯èª¤ç¢¼å®šç¾©æ¨™æº–
 */
public class BusinessException extends RuntimeException {
    private final String code;
    
    public BusinessException(String code, String message) {
        super(message);
        this.code = code;
    }
    
    // getter methods...
}
```

## ğŸ“ æ—¥èªŒè¨˜éŒ„è¦ç¯„

### æ—¥èªŒç­‰ç´šä½¿ç”¨ç­–ç•¥

**æ—¥èªŒç­‰ç´šå®šç¾©ï¼š**
- **ERRORï¼š** ç³»çµ±éŒ¯èª¤ï¼Œéœ€è¦ç«‹å³é—œæ³¨å’Œè™•ç†
- **WARNï¼š** æ¥­å‹™ç•°å¸¸æˆ–æ½›åœ¨å•é¡Œï¼Œéœ€è¦é—œæ³¨ä½†ä¸å½±éŸ¿ç³»çµ±é‹è¡Œ
- **INFOï¼š** é‡è¦æ¥­å‹™æ“ä½œè¨˜éŒ„ï¼ˆå‰µå»ºã€æ›´æ–°ã€åˆªé™¤ï¼‰ï¼Œç”¨æ–¼å¯©è¨ˆè¿½è¹¤
- **DEBUGï¼š** è©³ç´°åŸ·è¡Œæµç¨‹ï¼Œåƒ…åœ¨é–‹ç™¼å’Œæ¸¬è©¦ç’°å¢ƒä½¿ç”¨

### é—œéµè¨˜éŒ„é»å¯¦æ–½

**Serviceå±¤æ—¥èªŒç¯„ä¾‹ï¼š**
```java
@Slf4j
@Service
@RequiredArgsConstructor
public class RecipeService {
    
    private final RecipeRepository recipeRepository;
    
    /**
     * å‰µå»ºé…æ–¹
     * @Spec: user-flow.md:create-recipe - å‰µå»ºé…æ–¹å®Œæ•´æµç¨‹
     */
    public Recipe createRecipe(CreateRecipeRequest request) {
        log.info("å‰µå»ºé…æ–¹é–‹å§‹: name={}", request.getName()); // @Spec: user-flow.md:102
        
        try {
            // åƒæ•¸é©—è­‰ @Spec: model-validation.md:recipe-validation
            validateCreateRequest(request);
            
            // æ¥­å‹™é‚è¼¯è™•ç† @Spec: user-flow.md:108-112
            Recipe recipe = Recipe.builder()
                .name(request.getName())
                .description(request.getDescription())
                .build();
            
            Recipe savedRecipe = recipeRepository.save(recipe);
            log.info("å‰µå»ºé…æ–¹æˆåŠŸ: id={}, name={}", savedRecipe.getId(), savedRecipe.getName());
            
            return savedRecipe;
            
        } catch (ValidationException e) {
            log.warn("å‰µå»ºé…æ–¹é©—è­‰å¤±æ•—: name={}, error={}", request.getName(), e.getMessage());
            throw new BusinessException("RECIPE_VALIDATION_FAILED", e.getMessage());
        } catch (Exception e) {
            log.error("å‰µå»ºé…æ–¹ç³»çµ±ç•°å¸¸: name={}", request.getName(), e);
            throw new BusinessException("RECIPE_CREATE_FAILED", "é…æ–¹å‰µå»ºå¤±æ•—");
        }
    }
    
    private void validateCreateRequest(CreateRecipeRequest request) {
        // @Spec: model-validation.md:30-35 - é…æ–¹å‰µå»ºé©—è­‰è¦å‰‡
        if (request.getName().trim().isEmpty()) {
            throw new ValidationException("é…æ–¹åç¨±ä¸èƒ½ç‚ºç©º");
        }
        
        if (request.getName().length() > 100) {
            throw new ValidationException("é…æ–¹åç¨±ä¸èƒ½è¶…é100å€‹å­—å…ƒ");
        }
    }
}
```

**Controllerå±¤æ—¥èªŒç¯„ä¾‹ï¼š**
```java
@RestController
@RequestMapping("/api/recipe")
@RequiredArgsConstructor
@Slf4j
public class RecipeController {
    
    private final RecipeService recipeService;
    
    /**
     * å‰µå»ºé…æ–¹API
     * @Spec: api-design.md:create-recipe - å‰µå»ºé…æ–¹APIå®Œæ•´è¦æ ¼
     */
    @PostMapping("/create") // @Spec: api-design.md:45
    public ResponseEntity<ApiResponse> createRecipe(
        @RequestBody @Valid CreateRecipeRequest request // @Spec: api-design.md:53-58
    ) {
        log.debug("æ”¶åˆ°å‰µå»ºé…æ–¹è«‹æ±‚: {}", request);
        
        Recipe recipe = recipeService.createRecipe(request);
        
        log.debug("å‰µå»ºé…æ–¹APIå›æ‡‰: id={}", recipe.getId());
        return ResponseEntity.ok(ApiResponse.success(recipe)); // @Spec: api-design.md:59-65
    }
}
```

### æ—¥èªŒé…ç½®å»ºè­°

**logback-spring.xmlé…ç½®ï¼š**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- é–‹ç™¼ç’°å¢ƒé…ç½® -->
    <springProfile name="dev">
        <root level="DEBUG">
            <appender-ref ref="CONSOLE"/>
        </root>
    </springProfile>
    
    <!-- ç”Ÿç”¢ç’°å¢ƒé…ç½® -->
    <springProfile name="prod">
        <root level="INFO">
            <appender-ref ref="FILE"/>
        </root>
    </springProfile>
    
    <!-- æ¥­å‹™æ—¥èªŒå–®ç¨è¨˜éŒ„ -->
    <logger name="com.petworkshop.service" level="INFO" additivity="false">
        <appender-ref ref="BUSINESS_LOG"/>
    </logger>
</configuration>
```

## ğŸ“Š ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥

### éœæ…‹ç¨‹å¼ç¢¼åˆ†æ

**å·¥å…·æ•´åˆï¼š**
- **Checkstyle** - Google Java Style Guideè¦ç¯„æª¢æŸ¥
- **SpotBugs** - æ½›åœ¨å•é¡Œå’ŒéŒ¯èª¤æª¢æ¸¬
- **PMD** - ç¨‹å¼ç¢¼å“è³ªå’Œæ½›åœ¨å•é¡Œåˆ†æ
- **SonarQube** - ç¶œåˆç¨‹å¼ç¢¼å“è³ªå¹³å°

**Mavené…ç½®ç¯„ä¾‹ï¼š**
```xml
<plugin>
    <groupId>com.github.spotbugs</groupId>
    <artifactId>spotbugs-maven-plugin</artifactId>
    <version>4.7.3</version>
    <configuration>
        <effort>Max</effort>
        <threshold>Low</threshold>
    </configuration>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>3.2.0</version>
    <configuration>
        <configLocation>google_checks.xml</configLocation>
    </configuration>
</plugin>
```

### ç¨‹å¼ç¢¼å¯©æŸ¥æ¨™æº–

**å¯©æŸ¥é‡é»ï¼š**
1. **è¨­è¨ˆæ–‡ä»¶ç¬¦åˆæ€§** - æ¯å€‹å¯¦ç¾éƒ½æœ‰å°æ‡‰çš„@Specæ¨™è¨»
2. **ç•°å¸¸è™•ç†å®Œæ•´æ€§** - æ‰€æœ‰å¯èƒ½çš„ç•°å¸¸éƒ½æœ‰é©ç•¶è™•ç†
3. **æ—¥èªŒè¨˜éŒ„å……åˆ†æ€§** - é—œéµæ¥­å‹™æ“ä½œéƒ½æœ‰æ—¥èªŒè¨˜éŒ„
4. **ç¨‹å¼ç¢¼é¢¨æ ¼ä¸€è‡´æ€§** - ç¬¦åˆGoogle Java Style Guide
5. **Lombokä½¿ç”¨è¦ç¯„æ€§** - æŒ‰ç…§è¦ç¯„ä½¿ç”¨è¨»è§£

## ğŸ¯ é–‹ç™¼å·¥å…·é…ç½®

### IDEé…ç½®å»ºè­°

**IntelliJ IDEAï¼š**
- å®‰è£Google Java Formatæ’ä»¶
- é…ç½®Checkstyleæ’ä»¶ä½¿ç”¨google_checks.xml
- å•Ÿç”¨Lombokæ’ä»¶å’Œè¨»è§£è™•ç†
- é…ç½®æª”æ¡ˆæ¨¡æ¿åŒ…å«@Specæ¨™è¨»æ ¼å¼

**VS Codeï¼š**
- å®‰è£Extension Pack for Java
- é…ç½®java.format.settings.urlæŒ‡å‘Google Style
- å•Ÿç”¨Checkstyleå’ŒSpotBugsæ“´å……å¥—ä»¶

### å»ºæ§‹å·¥å…·é…ç½®

**Mavenè¨­å®šï¼š**
```xml
<properties>
    <java.version>21</java.version>
    <maven.compiler.source>21</maven.compiler.source>
    <maven.compiler.target>21</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<!-- ç¨‹å¼ç¢¼æ ¼å¼åŒ–æ’ä»¶ -->
<plugin>
    <groupId>com.diffplug.spotless</groupId>
    <artifactId>spotless-maven-plugin</artifactId>
    <version>2.40.0</version>
    <configuration>
        <java>
            <googleJavaFormat/>
        </java>
    </configuration>
</plugin>
```

## ğŸ“‹ å“è³ªæª¢æŸ¥æ¸…å–®

### æ—¥å¸¸é–‹ç™¼æª¢æŸ¥

**æäº¤å‰æª¢æŸ¥ï¼š**
- [ ] æ‰€æœ‰ç¨‹å¼ç¢¼éƒ½æœ‰å°æ‡‰çš„@Specæ¨™è¨»
- [ ] éµå¾ªGoogle Java Style Guideæ ¼å¼è¦ç¯„
- [ ] Lombokè¨»è§£ä½¿ç”¨ç¬¦åˆè¦ç¯„è¦æ±‚
- [ ] ç•°å¸¸è™•ç†å®Œæ•´ä¸”è¨Šæ¯æº–ç¢º
- [ ] é‡è¦æ“ä½œéƒ½æœ‰é©ç•¶çš„æ—¥èªŒè¨˜éŒ„
- [ ] éœæ…‹ç¨‹å¼ç¢¼åˆ†æå·¥å…·æª¢æŸ¥é€šé

**ç¨‹å¼ç¢¼å¯©æŸ¥æª¢æŸ¥ï¼š**
- [ ] è¨­è¨ˆæ–‡ä»¶å¼•ç”¨æº–ç¢ºä¸”å®Œæ•´
- [ ] æ¥­å‹™é‚è¼¯å¯¦ç¾ç¬¦åˆè¦ç¯„è¦æ±‚
- [ ] ç•°å¸¸è™•ç†ç­–ç•¥æ­£ç¢ºåŸ·è¡Œ
- [ ] æ—¥èªŒè¨˜éŒ„ç­‰ç´šå’Œå…§å®¹é©ç•¶
- [ ] ç¨‹å¼ç¢¼çµæ§‹æ¸…æ™°ä¸”å¯ç¶­è­·

---

**ç‰ˆæœ¬ï¼š** v1.0.0  
**å»ºç«‹æ—¥æœŸï¼š** 2025-09-07  
**ç‹€æ…‹ï¼š** âœ… ç¨‹å¼ç¢¼é¢¨æ ¼èˆ‡å“è³ªè¦ç¯„åˆ¶å®šå®Œæˆ  
**é©ç”¨ç¯„åœï¼š** æ‰€æœ‰å¾Œç«¯é–‹ç™¼å·¥ä½œ  
**ç¶­è­·è²¬ä»»ï¼š** å¾Œç«¯é–‹ç™¼åœ˜éšŠ