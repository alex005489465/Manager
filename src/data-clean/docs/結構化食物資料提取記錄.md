# 結構化食物資料提取記錄

## 專案概述
將具體食物評論進行結構化提取，從單純的文字評論轉換為可分析的結構化資料。

## 執行時間
2025-09-23

## 處理流程

### 1. 初始設定
- 建立 `extracted_food_items` 表存放結構化資料
- 新增 `is_food_items_extracted` 欄位追蹤處理狀態
- 新增 `data_completeness` 欄位標記資料完整度

### 2. LLM 提取邏輯
- 使用 Gemini 2.5 Flash-Lite 模型
- 每則評論可提取 0-N 個食物項目
- 每個項目包含：料理名稱、店家名稱、描述、價格、情感評價、完整度標記

### 3. 處理挑戰與解決
- **API 配額限制**：Gemini 1.5 Flash 免費版每日 50 次限制，改用 2.5 Flash-Lite
- **資料不對齊**：設計彈性結構，允許部分欄位為 NULL
- **處理狀態追蹤**：透過 `review_id` 關聯確保資料一致性

### 4. 批次處理策略
- 每批處理 10 則評論
- API 呼叫間隔 5 秒（避免頻率限制）
- 自動重試機制和錯誤處理

## 最終成果

### 處理統計
- **輸入**：160 則具體食物評論
- **輸出**：396 個結構化食物項目
- **完成率**：100%
- **平均提取率**：2.51 項/評論

### 資料品質
- **Partial (80.3%)**：318 項 - 有部分資訊
- **Minimal (10.9%)**：43 項 - 僅描述性內容
- **Complete (8.8%)**：35 項 - 完整資訊

### 情感分布
- **Positive (68.4%)**：271 項
- **Negative (18.9%)**：75 項
- **Neutral (12.6%)**：50 項

## 技術文件
- SQL 腳本：`05-create-extracted-food-items-table.sql`、`06-add-data-completeness-column.sql`
- 提取腳本：`extract_food_items.py`
- 輸出腳本：`export_specific_food_content.py`

## 應用價值
建立的結構化資料可用於：
- 料理熱門度分析
- 店家評價統計
- 情感趨勢分析
- 商業洞察報告生成

## 備註
使用 Gemini 2.5 Flash-Lite 成功避開免費版配額限制，完成了完整的結構化提取任務。