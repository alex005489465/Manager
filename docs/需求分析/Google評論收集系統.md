# Google評論收集系統需求分析

## 需求背景

### 核心目標
- 透過 Google 地圖評論分析驗證市場需求
- 低星評論更有價值，負面信息就是商機
- 從客戶痛點切入找到真正的市場空缺

### 目標數據源
- **永大夜市** Google 評論（總計 7452 條）
- **需求範圍**：最近 1000 條評論即可滿足分析需求

## 技術選型決策

### API 方案選擇
- **手動複製** vs **爬蟲** vs **API** 的考量
- **官方 API**：限制多
- **三方 API**：要付費但能隔離風險
- **選定方案**：SerpAPI
  - 免費額度：250 次調用/月
  - 每次調用：20 條評論
  - 計算需求：50 次 API 調用可獲取 1000 條評論

### 技術棧選擇
- **程式語言**：Python
- **儲存策略**：JSON 檔案存放到資料夾
- **增量更新**：透過 API 入參頁數控制

## 實現方案

### 核心設計原則
- **原始數據完整保存**：記錄 SerpAPI 的完整原始回應
- **簡單優先**：先把數據收集下來，分析功能後續考慮

### 技術架構

#### 專案結構
```
/src
  /data_collection
    - google_reviews_collector.py  # 主要收集器
    - serp_api_client.py          # SerpAPI 封裝
    - config.py                   # 配置管理
  /data
    /reviews
      /raw
        - yongda_reviews_page_1.json
        - yongda_reviews_page_2.json
        - ...
```

#### 核心參數設定
- **頁數範圍**：1-50 頁
- **總評論數**：1000 條
- **調用間隔**：2-3 秒（避免被限制）
- **檔案命名**：`yongda_reviews_page_{頁數}.json`

### API 調用控制策略
1. **頻率控制**：每次調用間隔 2-3 秒
2. **錯誤處理**：失敗重試機制
3. **進度追蹤**：顯示處理進度和成功/失敗狀態
4. **斷點續傳**：異常中斷後可從上次位置繼續
5. **日誌記錄**：每次 API 調用前後都要記錄 log
   - 調用前：記錄請求參數、時間戳
   - 調用後：記錄回應狀態、數據量、執行時間

### 依賴套件
- `requests` - API 調用
- `json` - 數據處理
- `time` - 調用間隔控制
- `os` - 檔案管理
- `logging` - 日誌記錄

## 實現重點

### 數據存儲
- 每頁原始 API 回應直接存成 JSON 檔
- 包含完整的 API 回應結構
- 原始數據路徑：`/data/reviews/raw/`

### 備案方案
- 如需更多數據，考慮 Playwright 或 Selenium 爬蟲方式
- API 額度不足時的替代方案

---

*建立日期：2025-09-22*
*專案：MeowManager - 餐車創業驗證*
*階段：第一階段市場驗證*