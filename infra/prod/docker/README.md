# Manager ç³»çµ± - ç”Ÿç”¢ç’°å¢ƒ JAR éƒ¨ç½²

## ğŸ—ï¸ å·¥ä½œæµç¨‹ï¼šé–‹ç™¼å®¹å™¨æ‰“åŒ… â†’ é›²ç«¯éƒ¨ç½²

```
æœ¬åœ°ç’°å¢ƒ                   é›²ç«¯ç’°å¢ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é–‹ç™¼å®¹å™¨æ‰“åŒ…    â”‚  â†’    â”‚  æ›è¼‰JARæª”æ¡ˆ     â”‚
â”‚  å°å‡ºJARæª”æ¡ˆ     â”‚       â”‚  å•Ÿå‹•Dockeræœå‹™  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
infra/prod/docker/
â”œâ”€â”€ Dockerfile              # ç”Ÿç”¢ç´šæ§‹å»ºæª”æ¡ˆï¼ˆå‚™ç”¨ï¼‰
â”œâ”€â”€ docker-compose.yml      # æœå‹™ç·¨æ’ï¼ˆJARæ›è¼‰æ¨¡å¼ï¼‰
â”œâ”€â”€ .dockerignore           # æ§‹å»ºå„ªåŒ–å¿½ç•¥æ¸…å–®
â”œâ”€â”€ build.sh               # æœ¬åœ°JARæ‰“åŒ…èˆ‡å°å‡ºè…³æœ¬
â”œâ”€â”€ run.sh                 # é›²ç«¯å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ .env.example           # ç’°å¢ƒè®Šæ•¸é…ç½®ç¯„æœ¬
â”œâ”€â”€ java/                  # JARæª”æ¡ˆå­˜æ”¾ç›®éŒ„
â”‚   â””â”€â”€ manager-backend-0.1.0.jar (55MB)
â””â”€â”€ README.md              # éƒ¨ç½²èªªæ˜æ–‡ä»¶
```

## ğŸš€ æœ¬åœ°æ‰“åŒ…

### å‰ç½®æ¢ä»¶
- é–‹ç™¼å®¹å™¨ `manager_java_dev` å¿…é ˆé‹è¡Œä¸­
- ç¢ºä¿å¾Œç«¯å°ˆæ¡ˆå·²å®Œæˆé–‹ç™¼

### 1. JAR æ‰“åŒ…èˆ‡å°å‡º
```bash
cd infra/prod/docker
chmod +x build.sh
./build.sh
```

æ‰“åŒ…è…³æœ¬æœƒï¼š
- âœ… æª¢æŸ¥é–‹ç™¼å®¹å™¨ç‹€æ…‹
- âœ… åœ¨å®¹å™¨å…§æ¸…ç†ä¸¦ç·¨è­¯å°ˆæ¡ˆ
- âœ… å¯é¸åŸ·è¡Œæ¸¬è©¦
- âœ… Maven æ‰“åŒ…ç”Ÿæˆ JAR æª”æ¡ˆ
- âœ… å°å‡º JAR åˆ° `java/manager-backend-0.1.0.jar`
- âœ… å¯é¸æ¸¬è©¦å®¹å™¨åŒ–å•Ÿå‹•

## â˜ï¸ é›²ç«¯éƒ¨ç½²

### 1. è¤‡è£½æª”æ¡ˆåˆ°é›²ç«¯
å°‡æ•´å€‹ `docker/` è³‡æ–™å¤¾è¤‡è£½åˆ°é›²ç«¯ä¼ºæœå™¨ï¼Œç¢ºä¿åŒ…å«ï¼š
- `java/manager-backend-0.1.0.jar` (ç´„55MB)
- `docker-compose.yml`
- `.env.example` â†’ è¤‡è£½ç‚º `.env` ä¸¦é…ç½®

### 2. ä¸€éµå•Ÿå‹•æœå‹™
```bash
cd docker
chmod +x run.sh
./run.sh
```

å•Ÿå‹•è…³æœ¬æœƒï¼š
- âœ… æª¢æŸ¥ JAR æª”æ¡ˆå­˜åœ¨
- âœ… è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆå¦‚éœ€è¦ï¼‰
- âœ… é æ‹‰å– Java 21 é‹è¡Œæ™‚é¡åƒ
- âœ… å•Ÿå‹• MySQL + å¾Œç«¯æœå‹™
- âœ… åŸ·è¡Œå¥åº·æª¢æŸ¥å’Œ API æ¸¬è©¦
- âœ… é¡¯ç¤ºæœå‹™ç‹€æ…‹

## ğŸ” æœå‹™ç«¯é»

- **API æœå‹™**: http://localhost:8082
- **API å¥åº·æª¢æŸ¥**: http://localhost:8082/api/health
- **ç³»çµ±å¥åº·æª¢æŸ¥**: http://localhost:8083/actuator/health
- **ç›£æ§è³‡è¨Š**: http://localhost:8083/actuator/info
- **è³‡æ–™åº«**: localhost:3306

## ğŸ“Š æŠ€è¡“æ¶æ§‹

### JAR éƒ¨ç½²æ¨¡å¼
- **é‹è¡Œæ™‚**: `eclipse-temurin:21-jre-alpine`
- **JAR æª”æ¡ˆ**: é€é Docker Volume æ›è¼‰
- **æª”æ¡ˆå¤§å°**: ~55MBï¼ˆåŒ…å«æ‰€æœ‰ä¾è³´ï¼‰
- **å•Ÿå‹•æ–¹å¼**: `java -jar manager-backend-0.1.0.jar`

### æœå‹™çµ„æˆ
- **å¾Œç«¯æœå‹™**: Spring Boot 3.5.5 JAR æ‡‰ç”¨
- **è³‡æ–™åº«**: MySQL 9.4.0 å®¹å™¨
- **ç®¡ç†å·¥å…·**: phpMyAdminï¼ˆå¯é¸ï¼‰

## ğŸ“Š ç›£æ§èˆ‡ç¶­è­·

```bash
# æŸ¥çœ‹æœå‹™ç‹€æ…‹
docker-compose ps

# æŸ¥çœ‹å¾Œç«¯æ—¥èªŒ
docker-compose logs -f manager-backend

# æŸ¥çœ‹æ‰€æœ‰æ—¥èªŒ
docker-compose logs -f

# é‡æ–°å•Ÿå‹•å¾Œç«¯
docker-compose restart manager-backend

# é‡æ–°å•Ÿå‹•æ‰€æœ‰æœå‹™
docker-compose restart

# åœæ­¢æœå‹™
docker-compose down

# æ›´æ–° JAR æª”æ¡ˆå¾Œé‡å•Ÿ
docker-compose restart manager-backend
```

## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é …

1. **å¯†ç¢¼å®‰å…¨**: ä¿®æ”¹ .env ä¸­çš„é è¨­å¯†ç¢¼
2. **æª”æ¡ˆæ¬Šé™**: JAR æª”æ¡ˆè¨­ç‚ºå”¯è®€æ›è¼‰
3. **é˜²ç«ç‰†**: åƒ…é–‹æ”¾å¿…è¦ç«¯å£å°å¤–
4. **SSL**: å»ºè­°ä½¿ç”¨åå‘ä»£ç†é…ç½® HTTPS
5. **å‚™ä»½**: å®šæœŸå‚™ä»½ volume/mysql è³‡æ–™

## ğŸ”„ æ›´æ–°æµç¨‹

1. æœ¬åœ°ä¿®æ”¹ç¨‹å¼ç¢¼
2. åŸ·è¡Œ `./build.sh` é‡æ–°æ‰“åŒ…
3. è¤‡è£½æ–°çš„ `java/manager-backend-0.1.0.jar` åˆ°é›²ç«¯
4. é›²ç«¯åŸ·è¡Œ `docker-compose restart manager-backend`

---

**å„ªå‹¢**: JAR æª”æ¡ˆå°ã€éƒ¨ç½²å¿«é€Ÿã€è³‡æºå ç”¨å°‘
**é©ç”¨**: ä¸­å°å‹å°ˆæ¡ˆã€å¿«é€Ÿè¿­ä»£ç’°å¢ƒ